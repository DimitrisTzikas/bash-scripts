#!/bin/bash
notify(){ notify-send -r 1 -u low "$1";}

case $(printf 'Control Panel\nEdit\nMode\nVPN' | dmenu -i -sb "$COLOR1" -p "Which option?") in
	'Control Panel')
	sleep .2
	case $(printf 'Wifi\nBluetooth\nEthernet\nResolv' | dmenu -i -sb "$COLOR1" -p "Select mode:") in
		'Wifi')
		sleep .2
		case $(printf 'Enable\nDisable' | dmenu -i -sb "$COLOR1" -p "Select mode:") in
			'Enable')rfkill unblock wifi && notify "Enabled";;
			'Disable')sudo pkill wpa_supplicant ; rfkill block wifi && notify "Disabled";;
		esac;;
		'Bluetooth')
		sleep .2
		case $(printf 'Enable\nDisable' | dmenu -i -sb "$COLOR1" -p "Select mode:") in
			'Enable')sudo systemctl start bluetooth && rfkill unblock bluetooth && notify "Enabled";;
			'Disable')sudo systemctl stop bluetooth && rfkill block bluetooth && notify "Disabled";;
		esac;;
		'Ethernet')
		sleep .2
		case $(printf 'Enable\nDisable' | dmenu -i -sb "$COLOR1" -p "Select mode:") in
			'Enable')sudo ip link set up dev enp0s25 && notify "Enabled";;
			'Disable')sudo ip link set down dev enp0s25 && notify "Disabled";;
		esac;;
		'Resolv')
		sleep .2
		case $(printf 'Main\nIHUVPN\nDynamic' | dmenu -i -sb "$COLOR1" -p "Select mode:") in
			'Main')notify 'Swipe your finger' && sudo chattr -i /etc/resolv.conf && sudo cp /etc/resolv.conf.main /etc/resolv.conf && sudo chattr +i /etc/resolv.conf && notify "Resolv Changed";;
			'IHUVPN')notify 'Swipe your finger' && sudo chattr -i /etc/resolv.conf && sudo cp /etc/resolv.conf.ihuvpn /etc/resolv.conf && sudo chattr +i /etc/resolv.conf && notify "Resolv Changed";;
			'Dynamic')notify 'Swipe your finger' && sudo chattr -i /etc/resolv.conf && sudo rm /etc/resolv.conf && sudo resolvconf -u && notify "Resolv Changed";;
		esac;;
	esac;;
	'Edit')
	sleep .2
	file=`find ~/.dotfiles/ThinkpadX200s -type f | grep -v emacs.d | dmenu -i -sb "$COLOR1" -p "Select file:"` && (emacs $file & disown emacs);;
	'Mode')
	sleep .2
	case $(printf 'Home\nWork\nMobile' | dmenu -i -sb "$COLOR1" -p "Select mode:") in
		'Home')
			notify 'Swipe your finger' && sudo ip link set up dev enp0s25 && sudo pkill dhcpcd; sudo dhcpcd; sudo pkill wpa_supplicant
			xrandr --output VGA-1 --primary --right-of LVDS-1 --auto && xrandr --output LVDS-1 --left-of VGA-1 --auto && xmonad --restart
			sudo firewall onS
			sudo cp /etc/resolv.conf.example /etc/resolv.conf && sudo chattr +i /etc/resolv.conf;;
		'Work')
			xrandr --output VGA-1 --above LVDS-1 --auto && xrandr --output LVDS-1 --primary --below VGA-1 --auto && xmonad --restart
			sudo firewall onS
			sudo chattr -i /etc/resolv.conf && sudo rm /etc/resolv.conf && sudo resolvconf -u;;
		'Mobile')
			notify 'Swipe your finger' && sudo ip link set down dev enp0s25 && sudo pkill dhcpcd
			xrandr --output VGA-1 --off && xrandr --output LVDS-1 --auto && xmonad --restart
			sudo firewall onS
			sudo cp /etc/resolv.conf.example /etc/resolv.conf && sudo chattr +i /etc/resolv.conf;;
	esac;;
	'VPN')sleep .2;vpn;;
esac
